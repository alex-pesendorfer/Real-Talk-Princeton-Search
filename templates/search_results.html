<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
        <title>Real Talk Princeton Search</title>
    </head>

<body>

<nav class="navbar bg-dark" >
    <a class="navbar-brand text-white ms-3" href="/index"> Real Talk Princeton Search </a>
</nav>


<div class="bd-masthead pt-5 mb-3">
    <div></div>
    <div class="container-xxl bd-gutter">
        
        <div class="container text-center">
            <div class="row">
              <div class="col"></div>
              <div class="col-6">
                <form action="/index">
                    <div class="input-group">
                        <input type="search" value= "{{query_data}}" name="search" class="form-control">
                        <button type="submit" class="btn btn-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                              </svg>
                        </button>       
                    </div>
                </form>
              </div>
              <div class="col"></div>
            </div>
          </div>


    </div>
</div>


<br>
<div class="container-fluid search col-sm-10">
    <div>
        <hr>
        {% for match in results['matches']: %}
        <div class="card">
            <div class="card-header container-fluid">
                <div class="row">
                    <div class="col align-self-start">
                        Match Score: {{ "%.1f"|format(match['score'] * 100) }}
                    </div>
                    <div class="col align-self-end">
                        <div class="text-end"> {{ (match['metadata']['timestamp'] | ETDateTime) }} </div>
                    </div>
                </div>                
            </div>
            <div class="card-body">
                <!-- <a href= {{ match['metadata']['post_url'] }}> Question: </a> -->
                <strong> Question: </strong> <br>
                {{ match['metadata']['Question'] }} 
                <br>
                <br>
                <strong>Answer: </strong> <br>
                <p>{{ match['metadata']['Answer'] }}
                    {% if match['metadata']['Answer']|length  > 1499 %}
                    <a href= {{ match['metadata']['post_url'] }}> ...See Full Post </a>
                    {% endif %}
                </p>
            </div>
        </div>
        <hr>
        {% endfor %}
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
</body>
</html>